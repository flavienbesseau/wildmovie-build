{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/src/App.jsx\";\nimport React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport _ from \"lodash\";\nimport ListMovies from \"./components/ListMovies\";\nimport GenreList from \"./components/GenreList\";\nimport Carrousel from \"./components/Carrousel\";\nimport FicheFilm from \"./components/FicheFilm\";\nimport Search from \"./components/Search\";\nimport Random from \"./components/Random\";\nimport Contact from \"./components/Contact\";\nimport UpCommingMovies from \"./components/UpCommingMovies\";\nimport PopularMovies from \"./components/PopularMovies\";\nimport MoreMovies from \"./components/MoreMovies\";\nimport Footer from \"./components/Footer\";\nimport Settings from \"./components/Settings\";\nimport MyList from \"./components/MyList\";\nimport FavoritesContext from \"./contexts/FavoritesContext\";\nimport NavbarComponent from \"./components/NavBarComponent\";\nconst apiEndPoint = \"https://api.themoviedb.org/3/\";\nconst popularMoviesUrl = \"discover/movie?language=fr&sort_by=popularity.desc\";\nconst images = \"&append_to_response=images\";\nconst apiKey = \"api_key=184a078836bbb9d9a754e937f43861a4\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getSample = () => {\n      axios.get(\"https://api.themoviedb.org/3/genre/movie/list?api_key=126f215d56fe6c222e6d996558bb1e98\").then(response => response.data).then(data => {\n        this.setState({\n          genres: data.genres\n        });\n      });\n    };\n\n    this.initMovies = () => {\n      axios.get(`${apiEndPoint}${popularMoviesUrl}${images}&${apiKey}`).then(response => this.setState({\n        topRated: response.data.results.slice(1, 6)\n      }));\n    };\n\n    this.getTopRated = () => {\n      const {\n        pageMovie\n      } = this.state;\n      const key = \"126f215d56fe6c222e6d996558bb1e98\";\n      const url = `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}&language=en-\n    US&page=${pageMovie}`;\n      axios.get(url).then(response => response.data).then(response => response.results).then(movieArray => this.setState({\n        movies: movieArray\n      }));\n    };\n\n    this.getUpComingMovies = () => {\n      const {\n        pageMovieUpComing\n      } = this.state;\n      const key = \"126f215d56fe6c222e6d996558bb1e98\";\n      const url = `https://api.themoviedb.org/3/movie/upcoming?api_key=${key}&language=en-\n    US&page=${pageMovieUpComing}`;\n      axios.get(url).then(res => res.data).then(res => res.results).then(movieUpComingArr => this.setState({\n        moviesUpComing: movieUpComingArr\n      }));\n    };\n\n    this.getPopularMovies = () => {\n      const {\n        pageMoviePopular\n      } = this.state;\n      const key = \"126f215d56fe6c222e6d996558bb1e98\";\n      const url = `https://api.themoviedb.org/3/movie/popular?api_key=${key}&language=en-\n    US&page=${pageMoviePopular}\n    `;\n      axios.get(url).then(res => res.data).then(res => res.results).then(moviePopularArr => this.setState({\n        moviesPopular: moviePopularArr\n      }));\n    };\n\n    this.getMoreMovies = () => {\n      const {\n        pageMoreMovies\n      } = this.state;\n      const key = \"126f215d56fe6c222e6d996558bb1e98\";\n      const url = `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}&language=en-\n    US&page=${pageMoreMovies}`;\n      axios.get(url).then(res => res.data).then(res => res.results).then(movieMoreArr => this.setState({\n        moviesMore: movieMoreArr\n      }));\n    };\n\n    this.handleButtonClicked = ev => {\n      const {\n        genresToFilter\n      } = this.state;\n      let newGenresToFilter = [...genresToFilter];\n\n      if (!newGenresToFilter.includes(Number(ev.currentTarget.value))) {\n        newGenresToFilter.push(Number(ev.currentTarget.value));\n      } else {\n        newGenresToFilter = newGenresToFilter.filter(e => e !== Number(ev.currentTarget.value));\n      }\n\n      this.setState({\n        genresToFilter: newGenresToFilter\n      });\n    };\n\n    this.IncrementPageMoreMovies = () => {\n      const {\n        pageMoreMovies\n      } = this.state;\n      this.setState({\n        pageMoreMovies: pageMoreMovies + 1\n      });\n      this.getMoreMovies();\n    };\n\n    this.DecrementPageMoreMovies = () => {\n      const {\n        pageMoreMovies\n      } = this.state;\n      this.setState({\n        pageMoreMovies: pageMoreMovies - 1\n      });\n      this.getMoreMovies();\n    };\n\n    this.IncrementPageUpComingMovies = () => {\n      const {\n        pageMovieUpComing\n      } = this.state;\n      this.setState({\n        pageMovieUpComing: pageMovieUpComing + 1\n      });\n      this.getUpComingMovies();\n    };\n\n    this.DecrementPageUpComingMovies = () => {\n      const {\n        pageMovieUpComing\n      } = this.state;\n      this.setState({\n        pageMovieUpComing: pageMovieUpComing - 1\n      });\n      this.getUpComingMovies();\n    };\n\n    this.IncrementPagePopularMovies = () => {\n      const {\n        pageMoviePopular\n      } = this.state;\n      this.setState({\n        pageMoviePopular: pageMoviePopular + 1\n      });\n      this.getPopularMovies();\n    };\n\n    this.DecrementPagePopularMovies = () => {\n      const {\n        pageMoviePopular\n      } = this.state;\n      this.setState({\n        pageMoviePopular: pageMoviePopular - 1\n      });\n      this.getPopularMovies();\n    };\n\n    this.IncrementPageExploreMovies = () => {\n      const {\n        pageMovie\n      } = this.state;\n      this.setState({\n        pageMovie: pageMovie + 1\n      });\n      this.getTopRated();\n    };\n\n    this.DecrementPageExploreMovies = () => {\n      const {\n        pageMovie\n      } = this.state;\n      this.setState({\n        pageMovie: pageMovie - 1\n      });\n      this.getTopRated();\n    };\n\n    this.onClickFavorite = id => {\n      const {\n        favorites\n      } = this.state;\n\n      if (favorites.includes(id)) {\n        favorites.splice(favorites.indexOf(id), 1);\n      } else {\n        favorites.push(id);\n      }\n\n      this.setState({\n        favorites\n      }, this.saveStateToLocalStorage);\n    };\n\n    this.onClickAlreadySeen = id => {\n      const {\n        alreadySeen\n      } = this.state;\n\n      if (alreadySeen.includes(id)) {\n        alreadySeen.splice(alreadySeen.indexOf(id), 1);\n      } else {\n        alreadySeen.push(id);\n      }\n\n      this.setState({\n        alreadySeen\n      }, this.saveStateToLocalStorage);\n    };\n\n    this.saveStateToLocalStorage = () => {\n      localStorage.setItem(\"state\", JSON.stringify(this.state));\n    };\n\n    this.state = {\n      topRated: null,\n      genres: null,\n      // state from ListMovie\n      movies: [],\n      genresToFilter: [],\n      isFavorite: false,\n      favorites: [],\n      alreadySeen: [],\n      pageMovie: 1,\n      pageMoviePopular: 1,\n      pageMovieUpComing: 1,\n      pageMoreMovies: 1,\n      moviesMore: [],\n      moviesPopular: [],\n      moviesUpComing: []\n    };\n  }\n\n  componentDidMount() {\n    this.initMovies();\n    this.getSample();\n    this.getTopRated();\n    this.getMoreMovies();\n    this.getPopularMovies();\n    this.getUpComingMovies();\n    const state = localStorage.getItem(\"state\");\n\n    if (state) {\n      this.setState(JSON.parse(state));\n    } // localStorage.clear();\n\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      pageMovie,\n      pageMovieUpComing,\n      pageMoviePopular,\n      pageMoreMovies\n    } = this.state;\n\n    if (!_.isEqual(prevState.pageMovie, pageMovie)) {\n      this.getTopRated();\n    }\n\n    if (!_.isEqual(prevState.pageMovieUpComing, pageMovieUpComing)) {\n      this.getUpComingMovies();\n    }\n\n    if (!_.isEqual(prevState.pageMoreMovies, pageMoreMovies)) {\n      this.getMoreMovies();\n    }\n\n    if (!_.isEqual(prevState.pageMoviePopular, pageMoviePopular)) {\n      this.getPopularMovies();\n    }\n  }\n\n  render() {\n    const {\n      topRated: topRatedMovies\n    } = this.state;\n    const {\n      genres,\n      movies,\n      genresToFilter,\n      isFavorite,\n      favorites,\n      pageMoreMovies,\n      moviesMore,\n      alreadySeen\n    } = this.state;\n    const {\n      moviesPopular,\n      moviesUpComing,\n      pageMovie,\n      pageMoviePopular,\n      pageMovieUpComing\n    } = this.state;\n    const listFiletred = movies.filter(movie => genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])).map(movie => movie);\n    const upComingFiltred = moviesUpComing.filter(movie => genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])).map(movie => movie);\n    const moviesPopularFiltered = moviesPopular.filter(movie => genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])).map(movie => movie);\n    const moviesMoreFiltered = moviesMore.filter(movie => genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])).map(movie => movie);\n    return /*#__PURE__*/_jsxDEV(Router, {\n      className: \"body\",\n      children: /*#__PURE__*/_jsxDEV(FavoritesContext.Provider, {\n        value: {\n          favorites,\n          alreadySeen,\n          onClickFavorite: this.onClickFavorite,\n          onClickAlreadySeen: this.onClickAlreadySeen\n        },\n        children: [/*#__PURE__*/_jsxDEV(NavbarComponent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/\",\n            children: [topRatedMovies ? /*#__PURE__*/_jsxDEV(Carrousel, {\n              topRatedMovies: topRatedMovies\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"loading\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: genres ? /*#__PURE__*/_jsxDEV(GenreList, {\n                genres: genres,\n                handleButtonClicked: this.handleButtonClicked,\n                genresToFilter: genresToFilter\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"loading\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"title\",\n                children: \"Explore\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 17\n              }, this), !genresToFilter.length ? /*#__PURE__*/_jsxDEV(ListMovies, {\n                pageMovie: pageMovie,\n                DecrementPageExploreMovies: this.DecrementPageExploreMovies,\n                IncrementPageExploreMovies: this.IncrementPageExploreMovies,\n                movies: movies,\n                genresToFilter: genresToFilter,\n                isFavorite: isFavorite,\n                addToFavorite: this.addToFavorite\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(ListMovies, {\n                pageMovie: pageMovie,\n                DecrementPageExploreMovies: this.DecrementPageExploreMovies,\n                IncrementPageExploreMovies: this.IncrementPageExploreMovies,\n                movies: listFiletred,\n                genresToFilter: genresToFilter,\n                isFavorite: isFavorite,\n                addToFavorite: this.addToFavorite\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"title\",\n                children: \"Upcoming\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 17\n              }, this), !genresToFilter.length ? /*#__PURE__*/_jsxDEV(UpCommingMovies, {\n                pageMovieUpComing: pageMovieUpComing,\n                IncrementPageUpComingMovies: this.IncrementPageUpComingMovies,\n                DecrementPageUpComingMovies: this.DecrementPageUpComingMovies,\n                moviesUpComing: moviesUpComing\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(UpCommingMovies, {\n                pageMovieUpComing: pageMovieUpComing,\n                IncrementPageUpComingMovies: this.IncrementPageUpComingMovies,\n                DecrementPageUpComingMovies: this.DecrementPageUpComingMovies,\n                moviesUpComing: upComingFiltred\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 377,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"title\",\n                children: \"Popular\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 390,\n                columnNumber: 17\n              }, this), !genresToFilter.length ? /*#__PURE__*/_jsxDEV(PopularMovies, {\n                pageMoviePopular: pageMoviePopular,\n                IncrementPagePopularMovies: this.IncrementPagePopularMovies,\n                DecrementPagePopularMovies: this.DecrementPagePopularMovies,\n                moviesPopular: moviesPopular\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(PopularMovies, {\n                pageMoviePopular: pageMoviePopular,\n                IncrementPagePopularMovies: this.IncrementPagePopularMovies,\n                DecrementPagePopularMovies: this.DecrementPagePopularMovies,\n                moviesPopular: moviesPopularFiltered\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"title\",\n                children: \"More\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 408,\n                columnNumber: 17\n              }, this), !genresToFilter.length ? /*#__PURE__*/_jsxDEV(MoreMovies, {\n                pageMoreMovies: pageMoreMovies,\n                IncrementPageMoreMovies: this.IncrementPageMoreMovies,\n                DecrementPageMoreMovies: this.DecrementPageMoreMovies,\n                moviesMore: moviesMore\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 410,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(MoreMovies, {\n                pageMoreMovies: pageMoreMovies,\n                IncrementPageMoreMovies: this.IncrementPageMoreMovies,\n                DecrementPageMoreMovies: this.DecrementPageMoreMovies,\n                moviesMore: moviesMoreFiltered\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/search\",\n            children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/random\",\n            children: /*#__PURE__*/_jsxDEV(Random, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/myprofile/mylist\",\n            children: /*#__PURE__*/_jsxDEV(MyList, {\n              favorites: favorites,\n              alreadySeen: alreadySeen\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/myprofile/contact\",\n            children: /*#__PURE__*/_jsxDEV(Contact, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 437,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/myprofile/settings\",\n            children: /*#__PURE__*/_jsxDEV(Settings, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 440,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/movie/:id\",\n            component: FicheFilm\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/src/App.jsx"],"names":["React","Component","BrowserRouter","Router","Route","Switch","axios","_","ListMovies","GenreList","Carrousel","FicheFilm","Search","Random","Contact","UpCommingMovies","PopularMovies","MoreMovies","Footer","Settings","MyList","FavoritesContext","NavbarComponent","apiEndPoint","popularMoviesUrl","images","apiKey","App","constructor","props","getSample","get","then","response","data","setState","genres","initMovies","topRated","results","slice","getTopRated","pageMovie","state","key","url","movieArray","movies","getUpComingMovies","pageMovieUpComing","res","movieUpComingArr","moviesUpComing","getPopularMovies","pageMoviePopular","moviePopularArr","moviesPopular","getMoreMovies","pageMoreMovies","movieMoreArr","moviesMore","handleButtonClicked","ev","genresToFilter","newGenresToFilter","includes","Number","currentTarget","value","push","filter","e","IncrementPageMoreMovies","DecrementPageMoreMovies","IncrementPageUpComingMovies","DecrementPageUpComingMovies","IncrementPagePopularMovies","DecrementPagePopularMovies","IncrementPageExploreMovies","DecrementPageExploreMovies","onClickFavorite","id","favorites","splice","indexOf","saveStateToLocalStorage","onClickAlreadySeen","alreadySeen","localStorage","setItem","JSON","stringify","isFavorite","componentDidMount","getItem","parse","componentDidUpdate","prevProps","prevState","isEqual","render","topRatedMovies","listFiletred","movie","genre_ids","map","upComingFiltred","moviesPopularFiltered","moviesMoreFiltered","length","addToFavorite"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\nimport axios from \"axios\";\nimport \"./App.css\";\n\nimport _ from \"lodash\";\nimport ListMovies from \"./components/ListMovies\";\nimport GenreList from \"./components/GenreList\";\nimport Carrousel from \"./components/Carrousel\";\nimport FicheFilm from \"./components/FicheFilm\";\nimport Search from \"./components/Search\";\nimport Random from \"./components/Random\";\nimport Contact from \"./components/Contact\";\nimport UpCommingMovies from \"./components/UpCommingMovies\";\nimport PopularMovies from \"./components/PopularMovies\";\nimport MoreMovies from \"./components/MoreMovies\";\nimport Footer from \"./components/Footer\";\nimport Settings from \"./components/Settings\";\nimport MyList from \"./components/MyList\";\nimport FavoritesContext from \"./contexts/FavoritesContext\";\nimport NavbarComponent from \"./components/NavBarComponent\";\n\nconst apiEndPoint = \"https://api.themoviedb.org/3/\";\nconst popularMoviesUrl = \"discover/movie?language=fr&sort_by=popularity.desc\";\nconst images = \"&append_to_response=images\";\nconst apiKey = \"api_key=184a078836bbb9d9a754e937f43861a4\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      topRated: null,\n      genres: null,\n      // state from ListMovie\n      movies: [],\n      genresToFilter: [],\n      isFavorite: false,\n      favorites: [],\n      alreadySeen: [],\n      pageMovie: 1,\n      pageMoviePopular: 1,\n      pageMovieUpComing: 1,\n      pageMoreMovies: 1,\n      moviesMore: [],\n      moviesPopular: [],\n      moviesUpComing: [],\n    };\n  }\n\n  componentDidMount() {\n    this.initMovies();\n    this.getSample();\n    this.getTopRated();\n    this.getMoreMovies();\n    this.getPopularMovies();\n    this.getUpComingMovies();\n    const state = localStorage.getItem(\"state\");\n    if (state) {\n      this.setState(JSON.parse(state));\n    }\n    // localStorage.clear();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      pageMovie,\n      pageMovieUpComing,\n      pageMoviePopular,\n      pageMoreMovies,\n    } = this.state;\n\n    if (!_.isEqual(prevState.pageMovie, pageMovie)) {\n      this.getTopRated();\n    }\n\n    if (!_.isEqual(prevState.pageMovieUpComing, pageMovieUpComing)) {\n      this.getUpComingMovies();\n    }\n\n    if (!_.isEqual(prevState.pageMoreMovies, pageMoreMovies)) {\n      this.getMoreMovies();\n    }\n\n    if (!_.isEqual(prevState.pageMoviePopular, pageMoviePopular)) {\n      this.getPopularMovies();\n    }\n  }\n\n  getSample = () => {\n    axios\n      .get(\n        \"https://api.themoviedb.org/3/genre/movie/list?api_key=126f215d56fe6c222e6d996558bb1e98\"\n      )\n      .then((response) => response.data)\n      .then((data) => {\n        this.setState({ genres: data.genres });\n      });\n  };\n\n  initMovies = () => {\n    axios\n      .get(`${apiEndPoint}${popularMoviesUrl}${images}&${apiKey}`)\n      .then((response) =>\n        this.setState({ topRated: response.data.results.slice(1, 6) })\n      );\n  };\n\n  getTopRated = () => {\n    const { pageMovie } = this.state;\n    const key = \"126f215d56fe6c222e6d996558bb1e98\";\n    const url = `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}&language=en-\n    US&page=${pageMovie}`;\n    axios\n      .get(url)\n      .then((response) => response.data)\n      .then((response) => response.results)\n      .then((movieArray) => this.setState({ movies: movieArray }));\n  };\n\n  // Api request for list UpcomingMovies\n\n  getUpComingMovies = () => {\n    const { pageMovieUpComing } = this.state;\n    const key = \"126f215d56fe6c222e6d996558bb1e98\";\n    const url = `https://api.themoviedb.org/3/movie/upcoming?api_key=${key}&language=en-\n    US&page=${pageMovieUpComing}`;\n    axios\n      .get(url)\n      .then((res) => res.data)\n      .then((res) => res.results)\n      .then((movieUpComingArr) =>\n        this.setState({ moviesUpComing: movieUpComingArr })\n      );\n  };\n\n  // Api request for list PopularMovies\n  getPopularMovies = () => {\n    const { pageMoviePopular } = this.state;\n    const key = \"126f215d56fe6c222e6d996558bb1e98\";\n    const url = `https://api.themoviedb.org/3/movie/popular?api_key=${key}&language=en-\n    US&page=${pageMoviePopular}\n    `;\n    axios\n      .get(url)\n      .then((res) => res.data)\n      .then((res) => res.results)\n      .then((moviePopularArr) =>\n        this.setState({ moviesPopular: moviePopularArr })\n      );\n  };\n\n  // Api request for list MoreMovies\n  getMoreMovies = () => {\n    const { pageMoreMovies } = this.state;\n    const key = \"126f215d56fe6c222e6d996558bb1e98\";\n    const url = `https://api.themoviedb.org/3/movie/top_rated?api_key=${key}&language=en-\n    US&page=${pageMoreMovies}`;\n    axios\n      .get(url)\n      .then((res) => res.data)\n      .then((res) => res.results)\n      .then((movieMoreArr) => this.setState({ moviesMore: movieMoreArr }));\n  };\n\n  // listening method for genre button click\n  handleButtonClicked = (ev) => {\n    const { genresToFilter } = this.state;\n    let newGenresToFilter = [...genresToFilter];\n    if (!newGenresToFilter.includes(Number(ev.currentTarget.value))) {\n      newGenresToFilter.push(Number(ev.currentTarget.value));\n    } else {\n      newGenresToFilter = newGenresToFilter.filter(\n        (e) => e !== Number(ev.currentTarget.value)\n      );\n    }\n    this.setState({ genresToFilter: newGenresToFilter });\n  };\n\n  // Method for change page with button at the end of list MoreMovies\n\n  // method to change page on component MoreMovies\n  IncrementPageMoreMovies = () => {\n    const { pageMoreMovies } = this.state;\n    this.setState({ pageMoreMovies: pageMoreMovies + 1 });\n    this.getMoreMovies();\n  };\n\n  DecrementPageMoreMovies = () => {\n    const { pageMoreMovies } = this.state;\n    this.setState({ pageMoreMovies: pageMoreMovies - 1 });\n    this.getMoreMovies();\n  };\n\n  // method to change page on component UpComingMovies\n\n  IncrementPageUpComingMovies = () => {\n    const { pageMovieUpComing } = this.state;\n    this.setState({ pageMovieUpComing: pageMovieUpComing + 1 });\n    this.getUpComingMovies();\n  };\n\n  DecrementPageUpComingMovies = () => {\n    const { pageMovieUpComing } = this.state;\n    this.setState({ pageMovieUpComing: pageMovieUpComing - 1 });\n    this.getUpComingMovies();\n  };\n\n  // method to change page on component PopularMovies\n\n  IncrementPagePopularMovies = () => {\n    const { pageMoviePopular } = this.state;\n    this.setState({ pageMoviePopular: pageMoviePopular + 1 });\n    this.getPopularMovies();\n  };\n\n  DecrementPagePopularMovies = () => {\n    const { pageMoviePopular } = this.state;\n    this.setState({ pageMoviePopular: pageMoviePopular - 1 });\n    this.getPopularMovies();\n  };\n\n  // method to change page on component ListMovies\n\n  IncrementPageExploreMovies = () => {\n    const { pageMovie } = this.state;\n    this.setState({ pageMovie: pageMovie + 1 });\n    this.getTopRated();\n  };\n\n  DecrementPageExploreMovies = () => {\n    const { pageMovie } = this.state;\n    this.setState({ pageMovie: pageMovie - 1 });\n    this.getTopRated();\n  };\n\n  // method to add movie to Favorite list\n\n  onClickFavorite = (id) => {\n    const { favorites } = this.state;\n    if (favorites.includes(id)) {\n      favorites.splice(favorites.indexOf(id), 1);\n    } else {\n      favorites.push(id);\n    }\n    this.setState({ favorites }, this.saveStateToLocalStorage);\n  };\n\n  // method to add movie to alreadySeen list\n\n  onClickAlreadySeen = (id) => {\n    const { alreadySeen } = this.state;\n    if (alreadySeen.includes(id)) {\n      alreadySeen.splice(alreadySeen.indexOf(id), 1);\n    } else {\n      alreadySeen.push(id);\n    }\n    this.setState({ alreadySeen }, this.saveStateToLocalStorage);\n  };\n\n  // method for local storage\n\n  saveStateToLocalStorage = () => {\n    localStorage.setItem(\"state\", JSON.stringify(this.state));\n  };\n\n  render() {\n    const { topRated: topRatedMovies } = this.state;\n    const {\n      genres,\n      movies,\n      genresToFilter,\n      isFavorite,\n      favorites,\n      pageMoreMovies,\n      moviesMore,\n      alreadySeen,\n    } = this.state;\n    const {\n      moviesPopular,\n      moviesUpComing,\n      pageMovie,\n      pageMoviePopular,\n      pageMovieUpComing,\n    } = this.state;\n\n    const listFiletred = movies\n      .filter((movie) =>\n        genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])\n      )\n      .map((movie) => movie);\n\n    const upComingFiltred = moviesUpComing\n      .filter((movie) =>\n        genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])\n      )\n      .map((movie) => movie);\n\n    const moviesPopularFiltered = moviesPopular\n      .filter((movie) =>\n        genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])\n      )\n      .map((movie) => movie);\n\n    const moviesMoreFiltered = moviesMore\n      .filter((movie) =>\n        genresToFilter.includes(movie.genre_ids[0] || movie.genre_ids[1])\n      )\n      .map((movie) => movie);\n\n    return (\n      <Router className=\"body\">\n        <FavoritesContext.Provider\n          value={{\n            favorites,\n            alreadySeen,\n            onClickFavorite: this.onClickFavorite,\n            onClickAlreadySeen: this.onClickAlreadySeen,\n          }}\n        >\n          <NavbarComponent />\n          <Switch>\n            <Route exact path=\"/\">\n              {topRatedMovies ? (\n                <Carrousel topRatedMovies={topRatedMovies} />\n              ) : (\n                <p>loading</p>\n              )}\n              <div>\n                {genres ? (\n                  <GenreList\n                    genres={genres}\n                    handleButtonClicked={this.handleButtonClicked}\n                    genresToFilter={genresToFilter}\n                  />\n                ) : (\n                  <p>loading</p>\n                )}\n              </div>\n              <div>\n                <h1 className=\"title\">Explore</h1>\n                {!genresToFilter.length ? (\n                  <ListMovies\n                    pageMovie={pageMovie}\n                    DecrementPageExploreMovies={this.DecrementPageExploreMovies}\n                    IncrementPageExploreMovies={this.IncrementPageExploreMovies}\n                    movies={movies}\n                    genresToFilter={genresToFilter}\n                    isFavorite={isFavorite}\n                    addToFavorite={this.addToFavorite}\n                  />\n                ) : (\n                  <ListMovies\n                    pageMovie={pageMovie}\n                    DecrementPageExploreMovies={this.DecrementPageExploreMovies}\n                    IncrementPageExploreMovies={this.IncrementPageExploreMovies}\n                    movies={listFiletred}\n                    genresToFilter={genresToFilter}\n                    isFavorite={isFavorite}\n                    addToFavorite={this.addToFavorite}\n                  />\n                )}\n              </div>\n              <div>\n                <h1 className=\"title\">Upcoming</h1>\n                {!genresToFilter.length ? (\n                  <UpCommingMovies\n                    pageMovieUpComing={pageMovieUpComing}\n                    IncrementPageUpComingMovies={\n                      this.IncrementPageUpComingMovies\n                    }\n                    DecrementPageUpComingMovies={\n                      this.DecrementPageUpComingMovies\n                    }\n                    moviesUpComing={moviesUpComing}\n                  />\n                ) : (\n                  <UpCommingMovies\n                    pageMovieUpComing={pageMovieUpComing}\n                    IncrementPageUpComingMovies={\n                      this.IncrementPageUpComingMovies\n                    }\n                    DecrementPageUpComingMovies={\n                      this.DecrementPageUpComingMovies\n                    }\n                    moviesUpComing={upComingFiltred}\n                  />\n                )}\n              </div>\n              <div>\n                <h1 className=\"title\">Popular</h1>\n                {!genresToFilter.length ? (\n                  <PopularMovies\n                    pageMoviePopular={pageMoviePopular}\n                    IncrementPagePopularMovies={this.IncrementPagePopularMovies}\n                    DecrementPagePopularMovies={this.DecrementPagePopularMovies}\n                    moviesPopular={moviesPopular}\n                  />\n                ) : (\n                  <PopularMovies\n                    pageMoviePopular={pageMoviePopular}\n                    IncrementPagePopularMovies={this.IncrementPagePopularMovies}\n                    DecrementPagePopularMovies={this.DecrementPagePopularMovies}\n                    moviesPopular={moviesPopularFiltered}\n                  />\n                )}\n              </div>\n              <div>\n                <h1 className=\"title\">More</h1>\n                {!genresToFilter.length ? (\n                  <MoreMovies\n                    pageMoreMovies={pageMoreMovies}\n                    IncrementPageMoreMovies={this.IncrementPageMoreMovies}\n                    DecrementPageMoreMovies={this.DecrementPageMoreMovies}\n                    moviesMore={moviesMore}\n                  />\n                ) : (\n                  <MoreMovies\n                    pageMoreMovies={pageMoreMovies}\n                    IncrementPageMoreMovies={this.IncrementPageMoreMovies}\n                    DecrementPageMoreMovies={this.DecrementPageMoreMovies}\n                    moviesMore={moviesMoreFiltered}\n                  />\n                )}\n              </div>\n              <Footer />\n            </Route>\n            <Route exact path=\"/search\">\n              <Search />\n            </Route>\n            <Route exact path=\"/random\">\n              <Random />\n            </Route>\n            <Route exact path=\"/myprofile/mylist\">\n              <MyList favorites={favorites} alreadySeen={alreadySeen} />\n            </Route>\n            <Route exact path=\"/myprofile/contact\">\n              <Contact />\n            </Route>\n            <Route exact path=\"/myprofile/settings\">\n              <Settings />\n            </Route>\n            <Route exact path=\"/movie/:id\" component={FicheFilm} />\n          </Switch>\n        </FavoritesContext.Provider>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import axios from\"axios\";import RecommendationsStyles from\"../style/RecommendationsStyles\";import Movie from\"./Movie\";import keyApi from\"../const/apiKey\";var Recommendations=/*#__PURE__*/function(_Component){_inherits(Recommendations,_Component);var _super=_createSuper(Recommendations);function Recommendations(props){var _this;_classCallCheck(this,Recommendations);_this=_super.call(this,props);_this.getRecommendations=function(){var id=_this.props.id;var firstPartLink=\"https://api.themoviedb.org/3/movie/\".concat(id,\"/similar?api_key=\");var url=\"\".concat(firstPartLink).concat(keyApi,\"&language=en-US&page=1\");axios.get(url).then(function(response){return response.data;}).then(function(response){return response.results;}).then(function(recommendationsArray){return _this.setState({recommendations:recommendationsArray});}).catch(function(){return _this.setState({recommendations:[]});});};_this.state={recommendations:[]};return _this;}_createClass(Recommendations,[{key:\"componentDidMount\",value:function componentDidMount(){this.getRecommendations();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevId=prevProps.id;var id=this.props.id;if(prevId!==id){this.getRecommendations();}}},{key:\"render\",value:function render(){var recommendations=this.state.recommendations;return/*#__PURE__*/_jsx(RecommendationsStyles,{children:recommendations.length!==0?recommendations.filter(function(reco,index){return index<8;}).map(function(item){return/*#__PURE__*/_jsx(Movie,{posterPath:item.poster_path,title:item.title,id:item.id},item.id);}):/*#__PURE__*/_jsx(\"p\",{children:\"No recommendations available\"})});}}]);return Recommendations;}(Component);export default Recommendations;","map":{"version":3,"sources":["/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/src/components/Recommendations.jsx"],"names":["React","Component","axios","RecommendationsStyles","Movie","keyApi","Recommendations","props","getRecommendations","id","firstPartLink","url","get","then","response","data","results","recommendationsArray","setState","recommendations","catch","state","prevProps","prevId","length","filter","reco","index","map","item","poster_path","title"],"mappings":"+vBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,qBAAP,KAAkC,gCAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,C,GAEMC,CAAAA,e,kHACJ,yBAAYC,KAAZ,CAAmB,iDACjB,uBAAMA,KAAN,EADiB,MAoBnBC,kBApBmB,CAoBE,UAAM,IACjBC,CAAAA,EADiB,CACV,MAAKF,KADK,CACjBE,EADiB,CAEzB,GAAMC,CAAAA,aAAa,8CAAyCD,EAAzC,qBAAnB,CACA,GAAME,CAAAA,GAAG,WAAMD,aAAN,SAAsBL,MAAtB,0BAAT,CACAH,KAAK,CACFU,GADH,CACOD,GADP,EAEGE,IAFH,CAEQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAvB,EAFR,EAGGF,IAHH,CAGQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACE,OAAvB,EAHR,EAIGH,IAJH,CAIQ,SAACI,oBAAD,QACJ,OAAKC,QAAL,CAAc,CAAEC,eAAe,CAAEF,oBAAnB,CAAd,CADI,EAJR,EAOGG,KAPH,CAOS,iBAAM,OAAKF,QAAL,CAAc,CAAEC,eAAe,CAAE,EAAnB,CAAd,CAAN,EAPT,EAQD,CAhCkB,CAEjB,MAAKE,KAAL,CAAa,CACXF,eAAe,CAAE,EADN,CAAb,CAFiB,aAKlB,C,yFAEmB,CAClB,KAAKX,kBAAL,GACD,C,8DAEkBc,S,CAAW,CAC5B,GAAMC,CAAAA,MAAM,CAAGD,SAAS,CAACb,EAAzB,CAD4B,GAEpBA,CAAAA,EAFoB,CAEb,KAAKF,KAFQ,CAEpBE,EAFoB,CAI5B,GAAIc,MAAM,GAAKd,EAAf,CAAmB,CACjB,KAAKD,kBAAL,GACD,CACF,C,uCAgBQ,IACCW,CAAAA,eADD,CACqB,KAAKE,KAD1B,CACCF,eADD,CAEP,mBACE,KAAC,qBAAD,WACGA,eAAe,CAACK,MAAhB,GAA2B,CAA3B,CACCL,eAAe,CACZM,MADH,CACU,SAACC,IAAD,CAAOC,KAAP,QAAiBA,CAAAA,KAAK,CAAG,CAAzB,EADV,EAEGC,GAFH,CAEO,SAACC,IAAD,qBACH,KAAC,KAAD,EACE,UAAU,CAAEA,IAAI,CAACC,WADnB,CAEE,KAAK,CAAED,IAAI,CAACE,KAFd,CAGE,EAAE,CAAEF,IAAI,CAACpB,EAHX,EAIOoB,IAAI,CAACpB,EAJZ,CADG,EAFP,CADD,cAYC,mDAbJ,EADF,CAkBD,C,6BAvD2BR,S,EA8D9B,cAAeK,CAAAA,eAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport RecommendationsStyles from \"../style/RecommendationsStyles\";\nimport Movie from \"./Movie\";\nimport keyApi from \"../const/apiKey\";\n\nclass Recommendations extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      recommendations: [],\n    };\n  }\n\n  componentDidMount() {\n    this.getRecommendations();\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevId = prevProps.id;\n    const { id } = this.props;\n\n    if (prevId !== id) {\n      this.getRecommendations();\n    }\n  }\n\n  getRecommendations = () => {\n    const { id } = this.props;\n    const firstPartLink = `https://api.themoviedb.org/3/movie/${id}/similar?api_key=`;\n    const url = `${firstPartLink}${keyApi}&language=en-US&page=1`;\n    axios\n      .get(url)\n      .then((response) => response.data)\n      .then((response) => response.results)\n      .then((recommendationsArray) =>\n        this.setState({ recommendations: recommendationsArray })\n      )\n      .catch(() => this.setState({ recommendations: [] }));\n  };\n\n  render() {\n    const { recommendations } = this.state;\n    return (\n      <RecommendationsStyles>\n        {recommendations.length !== 0 ? (\n          recommendations\n            .filter((reco, index) => index < 8)\n            .map((item) => (\n              <Movie\n                posterPath={item.poster_path}\n                title={item.title}\n                id={item.id}\n                key={item.id}\n              />\n            ))\n        ) : (\n          <p>No recommendations available</p>\n        )}\n      </RecommendationsStyles>\n    );\n  }\n}\n\nRecommendations.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default Recommendations;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Component}from\"react\";import axios from\"axios\";import{ContainerGlobal,DetailsMovies,LeftDetails,Synopsis,DetailsRight,LiDetails,Infos,Image,DetailImage,H1,H3}from\"../style/FicheFilmCss\";import{IMAGE_BASE_URL}from\"../const/Const\";import Trailer from\"./Trailer\";import keyApi from\"../const/apiKey\";import Recommendations from\"./Recommendations\";var FicheFilm=/*#__PURE__*/function(_Component){_inherits(FicheFilm,_Component);var _super=_createSuper(FicheFilm);function FicheFilm(props){var _this;_classCallCheck(this,FicheFilm);_this=_super.call(this,props);_this.getMovie=function(){var id=_this.props.match.params.id;var url=\"https://api.themoviedb.org/3/movie/\".concat(id,\"?api_key=\").concat(keyApi,\"&language=en-US\");axios.get(url).then(function(response){return response.data;}).then(function(movieObject){return _this.setState({movie:movieObject});});};_this.getCredits=function(){var id=_this.props.match.params.id;var url=\"https://api.themoviedb.org/3/movie/\".concat(id,\"/credits?api_key=\").concat(keyApi);axios.get(url).then(function(response){return response.data;}).then(function(data){return _this.setState({cast:data.cast,crew:data.crew});});};_this.state={cast:[],crew:[],movie:{adult:null,poster_path:\"\",genres:[],original_language:\"\",title:\"\",release_date:\"\",runtime:0,vote_average:0,overview:\"\"}};return _this;}_createClass(FicheFilm,[{key:\"componentDidMount\",value:function componentDidMount(){this.getCredits();this.getMovie();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevMovie=prevProps.match.params.id;var id=this.props.match.params.id;if(prevMovie!==id){this.getCredits();this.getMovie();}}},{key:\"render\",value:function render(){var _this$state=this.state,cast=_this$state.cast,crew=_this$state.crew,movie=_this$state.movie;var genres=this.state.movie.genres;var date=new Date(movie.release_date);return/*#__PURE__*/_jsxs(ContainerGlobal,{children:[/*#__PURE__*/_jsx(Trailer,{id:movie.id}),/*#__PURE__*/_jsxs(DetailsMovies,{children:[/*#__PURE__*/_jsxs(LeftDetails,{children:[/*#__PURE__*/_jsx(H1,{children:movie.title}),/*#__PURE__*/_jsxs(\"h4\",{children:[date.getFullYear(),\" -\",movie.runtime,\"min -\",movie.vote_average,\"/10\",movie.adult?\"(Adult)\":\"\"]}),/*#__PURE__*/_jsx(H3,{children:\"Synopsis:\"}),/*#__PURE__*/_jsx(Synopsis,{children:movie.overview}),/*#__PURE__*/_jsx(H3,{children:\"Recommendations:\"}),/*#__PURE__*/_jsx(Recommendations,{id:movie.id})]}),/*#__PURE__*/_jsxs(DetailImage,{children:[/*#__PURE__*/_jsx(Image,{src:IMAGE_BASE_URL+movie.poster_path,alt:movie.title,width:\"300px\"}),/*#__PURE__*/_jsxs(Infos,{children:[/*#__PURE__*/_jsx(DetailsRight,{children:\"Genre\"}),genres.map(function(genre){return/*#__PURE__*/_jsx(LiDetails,{children:genre.name},genre.id);}),/*#__PURE__*/_jsx(DetailsRight,{children:\"Casting\"}),cast.filter(function(acteur){return acteur.order<3;}).map(function(item){return/*#__PURE__*/_jsx(LiDetails,{children:item.name},item.id);}),/*#__PURE__*/_jsx(DetailsRight,{children:\"Director\"}),crew.filter(function(realisateur){return realisateur.job===\"Director\";}).map(function(item){return/*#__PURE__*/_jsx(LiDetails,{children:item.name},item.id);}),/*#__PURE__*/_jsx(DetailsRight,{children:\"Original language\"}),/*#__PURE__*/_jsx(LiDetails,{children:movie.original_language})]})]})]})]});}}]);return FicheFilm;}(Component);export default FicheFilm;","map":{"version":3,"sources":["/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/src/components/FicheFilm.jsx"],"names":["React","Component","axios","ContainerGlobal","DetailsMovies","LeftDetails","Synopsis","DetailsRight","LiDetails","Infos","Image","DetailImage","H1","H3","IMAGE_BASE_URL","Trailer","keyApi","Recommendations","FicheFilm","props","getMovie","id","match","params","url","get","then","response","data","movieObject","setState","movie","getCredits","cast","crew","state","adult","poster_path","genres","original_language","title","release_date","runtime","vote_average","overview","prevProps","prevMovie","date","Date","getFullYear","map","genre","name","filter","acteur","order","item","realisateur","job"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport PropTypes from \"prop-types\";\nimport {\n  ContainerGlobal,\n  DetailsMovies,\n  LeftDetails,\n  Synopsis,\n  DetailsRight,\n  LiDetails,\n  Infos,\n  Image,\n  DetailImage,\n  H1,\n  H3,\n} from \"../style/FicheFilmCss\";\nimport { IMAGE_BASE_URL } from \"../const/Const\";\nimport Trailer from \"./Trailer\";\nimport keyApi from \"../const/apiKey\";\nimport Recommendations from \"./Recommendations\";\n\nclass FicheFilm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cast: [],\n      crew: [],\n      movie: {\n        adult: null,\n        poster_path: \"\",\n        genres: [],\n        original_language: \"\",\n        title: \"\",\n        release_date: \"\",\n        runtime: 0,\n        vote_average: 0,\n        overview: \"\",\n      },\n    };\n  }\n\n  componentDidMount() {\n    this.getCredits();\n    this.getMovie();\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevMovie = prevProps.match.params.id;\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    if (prevMovie !== id) {\n      this.getCredits();\n      this.getMovie();\n    }\n  }\n\n  getMovie = () => {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    const url = `https://api.themoviedb.org/3/movie/${id}?api_key=${keyApi}&language=en-US`;\n    axios\n      .get(url)\n      .then((response) => response.data)\n      .then((movieObject) => this.setState({ movie: movieObject }));\n  };\n\n  getCredits = () => {\n    const {\n      match: {\n        params: { id },\n      },\n    } = this.props;\n    const url = `https://api.themoviedb.org/3/movie/${id}/credits?api_key=${keyApi}`;\n    axios\n      .get(url)\n      .then((response) => response.data)\n      .then((data) =>\n        this.setState({\n          cast: data.cast,\n          crew: data.crew,\n        })\n      );\n  };\n\n  render() {\n    const { cast, crew, movie } = this.state;\n    const {\n      movie: { genres },\n    } = this.state;\n    const date = new Date(movie.release_date);\n    return (\n      <ContainerGlobal>\n        <Trailer id={movie.id} />\n        <DetailsMovies>\n          <LeftDetails>\n            <H1>{movie.title}</H1>\n            <h4>\n              {date.getFullYear()} -{movie.runtime}min -{movie.vote_average}/10\n              {movie.adult ? \"(Adult)\" : \"\"}\n            </h4>\n            <H3>Synopsis:</H3>\n            <Synopsis>{movie.overview}</Synopsis>\n            <H3>Recommendations:</H3>\n            <Recommendations id={movie.id} />\n          </LeftDetails>\n\n          <DetailImage>\n            <Image\n              src={IMAGE_BASE_URL + movie.poster_path}\n              alt={movie.title}\n              width=\"300px\"\n            />\n            <Infos>\n              <DetailsRight>Genre</DetailsRight>\n              {genres.map((genre) => (\n                <LiDetails key={genre.id}>{genre.name}</LiDetails>\n              ))}\n              <DetailsRight>Casting</DetailsRight>\n              {cast\n                .filter((acteur) => acteur.order < 3)\n                .map((item) => (\n                  <LiDetails key={item.id}>{item.name}</LiDetails>\n                ))}\n              <DetailsRight>Director</DetailsRight>\n              {crew\n                .filter((realisateur) => realisateur.job === \"Director\")\n                .map((item) => (\n                  <LiDetails key={item.id}>{item.name}</LiDetails>\n                ))}\n              <DetailsRight>Original language</DetailsRight>\n              <LiDetails>{movie.original_language}</LiDetails>\n            </Infos>\n          </DetailImage>\n        </DetailsMovies>\n      </ContainerGlobal>\n    );\n  }\n}\n\nFicheFilm.propTypes = {\n  match: PropTypes.shape({\n    params: PropTypes.shape({\n      id: PropTypes.string,\n    }),\n  }).isRequired,\n};\n\nexport default FicheFilm;\n"]},"metadata":{},"sourceType":"module"}
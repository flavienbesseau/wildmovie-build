{"ast":null,"code":"import _classCallCheck from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{Component}from\"react\";import axios from\"axios\";import ReactPlayer from\"react-player\";import TrailerStyle from\"../style/TrailerCss\";import YOUTUBE_URL from\"../const/ConstYoutube\";import keyApi from\"../const/apiKey\";var Trailer=/*#__PURE__*/function(_Component){_inherits(Trailer,_Component);var _super=_createSuper(Trailer);function Trailer(props){var _this;_classCallCheck(this,Trailer);_this=_super.call(this,props);_this.getBandeAnnonce=function(){// Ceci est la clé de l'API\nvar id=_this.props.id;axios.get(\"https://api.themoviedb.org/3/movie/\".concat(id,\"/videos?api_key=\").concat(keyApi,\"&language=en-US\"))// je reçois les données qui sont dans un tableau results et je cible la key\n.then(function(response){return response.data.results[0].key;}).then(function(trailer){return _this.setState({bandeAnnonce:trailer});}).catch(function(){return _this.setState({bandeAnnonce:undefined});});};_this.state={bandeAnnonce:undefined};return _this;}_createClass(Trailer,[{key:\"componentDidMount\",value:function componentDidMount(){this.getBandeAnnonce();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var prevId=prevProps.id;var id=this.props.id;if(prevId!==id){this.getBandeAnnonce();}}},{key:\"render\",value:function render(){var bandeAnnonce=this.state.bandeAnnonce;return/*#__PURE__*/_jsx(TrailerStyle,{children:bandeAnnonce?/*#__PURE__*/_jsx(ReactPlayer,{url:\"\".concat(YOUTUBE_URL+bandeAnnonce),width:\"100%\",height:\"600px\"}):/*#__PURE__*/_jsx(\"p\",{children:\"No Trailer Available\"})});}}]);return Trailer;}(Component);export default Trailer;","map":{"version":3,"sources":["/home/flaviostark/wildcodeschool/projets/tlse0920-js-p2-wildmovies/src/components/Trailer.jsx"],"names":["React","Component","axios","ReactPlayer","TrailerStyle","YOUTUBE_URL","keyApi","Trailer","props","getBandeAnnonce","id","get","then","response","data","results","key","trailer","setState","bandeAnnonce","catch","undefined","state","prevProps","prevId"],"mappings":"+vBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,WAAP,KAAwB,cAAxB,CAEA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,CACA,MAAOC,CAAAA,WAAP,KAAwB,uBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,iBAAnB,C,GAEMC,CAAAA,O,kGACJ,iBAAYC,KAAZ,CAAmB,yCACjB,uBAAMA,KAAN,EADiB,MAoBnBC,eApBmB,CAoBD,UAAM,CACtB;AADsB,GAEdC,CAAAA,EAFc,CAEP,MAAKF,KAFE,CAEdE,EAFc,CAGtBR,KAAK,CACFS,GADH,8CAE0CD,EAF1C,4BAE+DJ,MAF/D,oBAIE;AAJF,CAKGM,IALH,CAKQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,CAAcC,OAAd,CAAsB,CAAtB,EAAyBC,GAAvC,EALR,EAMGJ,IANH,CAMQ,SAACK,OAAD,QAAa,OAAKC,QAAL,CAAc,CAAEC,YAAY,CAAEF,OAAhB,CAAd,CAAb,EANR,EAOGG,KAPH,CAOS,iBAAM,OAAKF,QAAL,CAAc,CAAEC,YAAY,CAAEE,SAAhB,CAAd,CAAN,EAPT,EAQD,CA/BkB,CAEjB,MAAKC,KAAL,CAAa,CACXH,YAAY,CAAEE,SADH,CAAb,CAFiB,aAKlB,C,iFAEmB,CAClB,KAAKZ,eAAL,GACD,C,8DAEkBc,S,CAAW,CAC5B,GAAMC,CAAAA,MAAM,CAAGD,SAAS,CAACb,EAAzB,CAD4B,GAEpBA,CAAAA,EAFoB,CAEb,KAAKF,KAFQ,CAEpBE,EAFoB,CAI5B,GAAIc,MAAM,GAAKd,EAAf,CAAmB,CACjB,KAAKD,eAAL,GACD,CACF,C,uCAeQ,IACCU,CAAAA,YADD,CACkB,KAAKG,KADvB,CACCH,YADD,CAEP,mBACE,KAAC,YAAD,WACGA,YAAY,cACX,KAAC,WAAD,EACE,GAAG,WAAKd,WAAW,CAAGc,YAAnB,CADL,CAEE,KAAK,CAAC,MAFR,CAGE,MAAM,CAAC,OAHT,EADW,cAOX,2CARJ,EADF,CAaD,C,qBAjDmBlB,S,EAwDtB,cAAeM,CAAAA,OAAf","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport ReactPlayer from \"react-player\";\nimport PropTypes from \"prop-types\";\nimport TrailerStyle from \"../style/TrailerCss\";\nimport YOUTUBE_URL from \"../const/ConstYoutube\";\nimport keyApi from \"../const/apiKey\";\n\nclass Trailer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bandeAnnonce: undefined,\n    };\n  }\n\n  componentDidMount() {\n    this.getBandeAnnonce();\n  }\n\n  componentDidUpdate(prevProps) {\n    const prevId = prevProps.id;\n    const { id } = this.props;\n\n    if (prevId !== id) {\n      this.getBandeAnnonce();\n    }\n  }\n\n  getBandeAnnonce = () => {\n    // Ceci est la clé de l'API\n    const { id } = this.props;\n    axios\n      .get(\n        `https://api.themoviedb.org/3/movie/${id}/videos?api_key=${keyApi}&language=en-US`\n      )\n      // je reçois les données qui sont dans un tableau results et je cible la key\n      .then((response) => response.data.results[0].key)\n      .then((trailer) => this.setState({ bandeAnnonce: trailer }))\n      .catch(() => this.setState({ bandeAnnonce: undefined }));\n  };\n\n  render() {\n    const { bandeAnnonce } = this.state;\n    return (\n      <TrailerStyle>\n        {bandeAnnonce ? (\n          <ReactPlayer\n            url={`${YOUTUBE_URL + bandeAnnonce}`}\n            width=\"100%\"\n            height=\"600px\"\n          />\n        ) : (\n          <p>No Trailer Available</p>\n        )}\n      </TrailerStyle>\n    );\n  }\n}\n\nTrailer.propTypes = {\n  id: PropTypes.number.isRequired,\n};\n\nexport default Trailer;\n"]},"metadata":{},"sourceType":"module"}